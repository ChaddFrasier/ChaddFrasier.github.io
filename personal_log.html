<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chadd's Master Terminal</title>
<link rel="stylesheet" type="text/css" href="res/css/fallout.css">
<script src="res/src/controls.js"></script>
<script src="res/src/index.js"></script>
</head>
<body>

<div class="terminal">
  <div class="sweep-line"></div>
  <div id="screen"></div>
  <div id="screen-wrapped"></div>
  <div class="menu"></div>
  <div class="image-container">
    <img src="res/img/chadd-character-model-saying-hello.png" class="character-img" alt="Chadd Character" />
  </div>
</div>

<script>
const mainText = `Opening Personal Log...

> LOG DATA DOWNLOAD COMPLETED

Name: Chadd Frasier
Title: Software / Embedded Firmware Engineer



Description:
-------------
`;

const wrappedText = `With a background spanning web application development, embedded firmware design, and security-focused MCU engineering,
    he is an engineer uniquely equipped to solve complex software and hardware challenges in a creative and efficient way.
    From leading development of Microchipâ€™s 8-bit MDFU Client library and helping shaping a cross-architecture device firmware
    update protocol, to building secure HSM-backed Root-of-Trust firmware and SPAs for scientific analysis, he brings a proven ability
    to learn rapidly and deliver across a wide range of disciplines. His work spanning full SDLC ownership, TypeScript UI and
    C middleware development, Python test-system design, and cross-disciplinary collaboration highlights an adaptability that makes
    him an asset to hardware teams and a reliable contributor to any software project.`

const menuItems = [
  ["Main Menu", "terminal.html"],
];

const screen = document.getElementById('screen');
const menu = document.querySelector('.menu');
const image = document.querySelector('.character-img');
const wrappedTextScreen = document.getElementById("screen-wrapped");

let i = 0;

// Start typing main text
typeWriter(mainText, screen, 15, () => {
  // After main text, type menu items one by one
  function typeMenuItem(index) {
    if (index >= menuItems.length) {
      // Do not show the image on screen until menu items have been typed
      image.style.display = 'block';
      initMenu();
      return;
    }

    typeWriter(wrappedText, wrappedTextScreen, 5, () => {
      const itemDiv = document.createElement('div');
      itemDiv.className = 'menu-item';
      menu.appendChild(itemDiv);

      typeWriter(menuItems[index][0], itemDiv, 15, () => {
        typeMenuItem(index + 1);
      });
    });
  }

  typeMenuItem(0);
});

function initMenu() {
  const items = Array.from(document.querySelectorAll('.menu-item'));
  let current = 0;

  function updateHighlight() {
    items.forEach((el, i) => el.classList.toggle('selected', i === current));
  }

  updateHighlight();

  enableContentPageControls(items);

  items.forEach((el, i) => {
    el.dataset.link = menuItems[i][1];
    el.addEventListener('mouseover', () => {
      current = i;
      updateHighlight();
    });
    el.addEventListener('click', () => {
      window.location.href = el.dataset.link;
    });
  });

  items.forEach((el, i) => {
    var validSelection = el.classList.contains('selected');
    if(validSelection){
      current = i;
      updateHighlight();
    }
  });
}
</script>

</body>
</html>
